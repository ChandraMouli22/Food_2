<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Donate Food</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
    <style>
      /* Responsive improvements: fluid widths, wrapping flex, and mobile-friendly buttons */
      body {
        background-image: url("https://static.vecteezy.com/system/resources/previews/001/409/329/original/colorful-organic-geometric-shapes-abstract-background-free-vector.jpg");
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: scroll; /* avoid fixed on mobile */
        padding-top: 64px; /* space for fixed-top navbar */
      }

      .con { display:flex; align-items:center; }
      .maincon { margin-top: 20px; padding: 12px; }
      .head { text-align: center; }
      .con2 { display:flex; justify-content:center; }

      .content {
        height: auto;
        width: 100%;
        max-width: 720px;
        box-shadow: 0 0 8px rgba(0,0,0,0.08);
        background-color: white;
        border-radius: 8px;
        padding: 24px;
        margin-bottom: 20px;
        box-sizing: border-box;
      }

      .spans { max-width: 100%; height: auto; display:flex; flex-wrap:wrap; }
      .box { margin-top:10px; margin-left:0; box-shadow:0 0 5px grey; padding:10px; }

      /* make selects and address fluid */
      select { width: 100%; height: 44px; margin-bottom: 16px; border-radius: 5px; background-color: white; border: 2px solid gray; box-sizing: border-box; }
      .address { width: 100%; box-shadow: 0 0 5px grey; border-radius: 5px; padding: 10px; box-sizing: border-box; }
      .address p { margin: 0; }

      .donate { margin: 18px 0 0 0; display:flex; justify-content:center; }
      .donate button { height: 50px; width: 100%; max-width: 260px; background-color: rgb(66 164 199); border-radius: 6px; border:none; color:white; }
      .donate button:hover { box-shadow: 1px 1px 6px rgba(0,0,0,0.12); }

      .btb { height: 40px; width: 120px; background-color: rgb(160,216,29); border-radius:5px; border:none; color:white; }
      .btb:hover { box-shadow: 1px 1px 5px rgba(0,0,0,0.12); }

      #def_in { height: 40px; padding: 10px; border: 1px solid gray; border-radius: 5px; width:100%; box-sizing:border-box; }

      /* input container: responsive row that wraps */
      #inputContainer { margin-bottom: 16px; display:flex; flex-wrap:wrap; align-items:center; gap:10px; margin-top:10px; }
      #inputContainer input { margin-top:4px; text-align:left; border:2px solid gray; padding:8px 10px; border-radius:5px; }
      #inputContainer .input-row { display:flex; gap:12px; align-items:center; flex-wrap:wrap; width:100%; margin-bottom:12px; }
      /* spacing between logical boxes inside .content */
      .content > * { margin-top: 8px; }
      .content > *:first-child { margin-top: 0; }

      /* responsive sizing for inputs */
      #inp1 { height:40px; padding:10px; flex:1 1 60%; min-width:140px; border-radius:5px; box-sizing:border-box; }
      #inp2 { height:40px; padding:10px; flex:0 0 90px; border-radius:5px; box-sizing:border-box; }

      #inp1:focus, #inp2:focus, #org_sel:focus { border:none; outline:2px solid rgb(1,1,93); box-shadow:0 0 6px rgba(112,112,255,0.25); }

      .hed { width:100%; display:flex; justify-content:space-between; align-items:center; gap:12px; }

      .popup { height:100vh; width:100%; position:fixed; top:0; left:0; background-color:rgba(0,0,0,0.37); display:none; align-items:center; justify-content:center; }
      .popChild { background-color:white; height:auto; width:90%; max-width:420px; padding:20px; border-radius:10px; display:flex; flex-direction:column; justify-content:space-between; }
      #done { height:40px; width:100px; border-radius:5px; border:none; background-color:deepskyblue; box-shadow:1px 1px 5px gray; color:white; font-weight:bold; }

      /* remove button for dynamically added rows */
      .remove-btn { display:inline-flex; align-items:center; justify-content:center; background:transparent; border:none; color:#b60000; font-size:18px; cursor:pointer; padding:6px; border-radius:6px; }

      @media (max-width: 768px) {
        .hed { flex-direction:column; align-items:stretch; }
        .con, .con2 { flex-direction:column; align-items:stretch; }
        .btb { width: 100%; max-width:220px; }
        .maincon { margin-top:16px; }
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-dark bg-dark fixed-top">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">FOOD DONATION</a>
        <div class="con">
          <h3
            class="navbar-toggler"
            data-bs-toggle="offcanvas"
            aria-controls="offcanvasDarkNavbar"
            aria-label="Toggle navigation"
            style="border: none"
          >
            Jane Doe
          </h3>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasDarkNavbar"
            aria-controls="offcanvasDarkNavbar"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>

        <div
          class="offcanvas offcanvas-end text-bg-dark"
          tabindex="-1"
          id="offcanvasDarkNavbar"
          aria-labelledby="offcanvasDarkNavbarLabel"
        >
          <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel">MENU</h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="offcanvas"
              aria-label="Close"
            ></button>
          </div>
          <div class="offcanvas-body">
            <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="#"
                  style="
                    background-color: #666699;
                    padding-left: 20px;
                    border-radius: 5px;
                  "
                  >Home</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="/don_profile"
                  >Profile</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="/don_history"
                  >History</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/logout">LogOut</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>
    <div class="maincon">
      <h1 class="head">DONATE FOOD</h1>
      <div class="con2">
        <div class="content">
          <div class="hed">
            <h3 class="additems">Food Items</h3>
            <button class="btb" id="addInputButton">Add Item +</button>
          </div>
          <form id="foodform" action="/donat_food_submit" method="post">
            <label>Donation:</label>
            <input
              type="text"
              name="Donation"
              value="Food"
              id="def_in"
              readonly
            />
            <div id="inputContainer">
              <!-- <div>
                <input
                  type="text"
                  name="item"
                  placeholder="Item Name"
                  id="inp1"
                  required
                />
                <input
                  type="number"
                  name="qty"
                  placeholder="Qty"
                  id="inp2"
                  required
                />
              </div> -->
              <div class="input-row">
  <input
    type="text"
    name="item"
    placeholder="Item Name"
    id="inp1"
    required
  />
  <input
    type="number"
    name="qty"
    placeholder="Qty"
    id="inp2"
    required
  />
  <select name="unit" id="unit" required>
    <option value="" hidden>Select Unit</option>
    <option value="kg">Kg</option>
    <option value="litre">Litre</option>
    <option value="packet">Packet</option>
    <option value="piece">Piece</option>
    <option value="box">Box</option>
    <option value="bottle">Bottle</option>
  </select>
</div>

            </div>

            <h3 class="donate-to">Donate To:</h3>
            <select name="orgname" id="org_sel" required>
              <option selected hidden value="">Select Organization</option>
              
              <option value="Helping Hands">
                Helping Hands, Metroville
              </option>
              
              <option value="Food For All">
                Food For All, Greenville
              </option>
              
            </select>
          </form>
          <h3 class="contact">Contact:</h3>
          <p class="phone">9876543210</p>
          <h3 class="address-con">Address:</h3>
          <div class="address">
            <p>
              Sample City,12 Baker St<br />
              Sample District, Sample State<br />
              123456
            </p>
          </div>
          <div class="donate">
            <button
              type="submit"
              id="don_bt"
              form="foodform"
              onclick="donate()"
            >
              Donate
            </button>
          </div>
        </div>
      </div>
      <div class="popup">
        <div class="popChild">
          <div>
            <h3 style="color: rgb(1, 184, 1); font-weight: bold">
              Thank You For Donating.!
            </h3>
            <p>
              Organization will reach your address<br />
              and contacts you.
            </p>
          </div>
          <div style="display: flex; justify-content: end">
            <button id="done">Done</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      function removeInput() {
        this.parentElement.remove();
      }
      function addInput() {
        const childDiv = document.createElement("div");
        childDiv.className = 'input-row';
        // childDiv.innerHTML = `
        //     <input type="text" name="item" placeholder="Item Name" id="inp1" required>
        //     <input type="number" name="qty" placeholder="Qty" id="inp2" required>
        // `;
        childDiv.innerHTML = `
  <input type="text" name="item" placeholder="Item Name" id="inp1" required>
  <input type="number" name="qty" placeholder="Qty" id="inp2" required>
  <select name="unit" id="unit" required>
    <option value="" hidden>Select Unit</option>
    <option value="kg">Kg</option>
    <option value="litre">Litre</option>
    <option value="packet">Packet</option>
    <option value="piece">Piece</option>
    <option value="box">Box</option>
    <option value="bottle">Bottle</option>
  </select>
`;

        const inputContainer = document.getElementById("inputContainer");

        const del = document.createElement("button");
        del.type = 'button';
        del.className = 'remove-btn';
        del.setAttribute('aria-label', 'Remove item');
        del.innerText = 'âœ–';
        childDiv.appendChild(del);
        inputContainer.appendChild(childDiv);

        del.addEventListener("click", removeInput);
      }

      const addButton = document.getElementById("addInputButton");
      addButton.addEventListener("click", addInput);

      document.getElementById("done").addEventListener("click", () => {
        window.location.href = "/don_history";
      });

      function donate() {
        document.querySelectorAll("#inp1").forEach((ele) => {
          if (
            ele.value != "" &&
            document.getElementById("org_sel").value != ""
          ) {
            document.querySelector(".popup").style.display = "flex";
            document.documentElement.scrollTop = 0;
          }
          document.querySelectorAll("#inp2").forEach((ele) => {
            if (
              ele.value != "" &&
              document.getElementById("org_sel").value != ""
            ) {
              document.querySelector(".popup").style.display = "flex";
              document.documentElement.scrollTop = 0;
            }
          });
        });
      }
    </script>
  </body>
</html>
